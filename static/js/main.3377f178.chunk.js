(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{10:function(e,t,n){"use strict";n.d(t,"f",(function(){return a})),n.d(t,"d",(function(){return b})),n.d(t,"e",(function(){return p})),n.d(t,"h",(function(){return m})),n.d(t,"j",(function(){return u})),n.d(t,"b",(function(){return E})),n.d(t,"i",(function(){return d})),n.d(t,"a",(function(){return h})),n.d(t,"g",(function(){return g})),n.d(t,"c",(function(){return _}));var a=function(){},r=n(0),c=n.n(r),o=function(){return c.a.createElement("div",null,c.a.createElement("h5",null,"Loading"))},u=function(e){return function(t){return c.a.createElement(r.Suspense,{fallback:c.a.createElement(o,null)},c.a.createElement(e,t))}},i=n(7),s=n(34),l=n.n(s),f=n(39),v=n.n(f),d=function(e){var t=e.id,n=e.videos,a=e.overview,r=e.popularity,c=e.vote_count,o=e.poster_path,u=e.release_date,s=e.backdrop_path;return{id:t,videos:n,overview:a,popularity:r,isFavorites:!1,voteCount:c,title:e.original_title,releaseDate:u,poster:o?"".concat(i.c).concat(o):l.a,backdrop:s?"".concat(i.c).concat(s):v.a}},p=function(e){try{var t=localStorage.getItem(e);if(null===t)return;return JSON.parse(t)}catch(n){return}},m=function(e,t){try{var n=JSON.stringify(t);localStorage.setItem(e,n)}catch(a){}},b=function(e){return e.length>21?"".concat(e.slice(0,18),"..."):e},E=function(e,t,n){return e.find((function(e){return e[t]===n}))},h=function(e,t,n){return e.findIndex((function(e){return e[t]===n}))},g=function(e){return m("favorites",e)},_=function(e){var t=p("favorites");return t&&t.forEach((function(t){var n=t.id,a=h(e,"id",n);-1!==a&&(e[a].isFavorites=!0)})),e}},24:function(e,t,n){"use strict";n.d(t,"a",(function(){return y})),n.d(t,"b",(function(){return k}));var a=n(15),r=n(25),c={data:[],logout:null,favorites:[],totalPages:0,searchResult:[],searchTotalPages:0},o=n(8),u=n(9),i=n.n(u),s=n(17),l=n(37),f=n(2),v=n(3),d=n(7),p=function(){function e(){Object(f.a)(this,e)}return Object(v.a)(e,null,[{key:"has",value:function(t){return e.stack.has(t)}},{key:"set",value:function(t,n){e.has(t)||e.stack.set(t,n)}},{key:"get",value:function(t){if(e.has(t))return e.stack.get(t)}},{key:"drop",value:function(t){e.has(t)&&e.stack.delete(t)}}]),e}();p.stack=new Map;var m=p,b=function(e){return 401===e.status&&!1!==y.state.isLoggedIn&&y.actions.logout(),e},E=function(e){return"".concat(d.b,"/movie/").concat(e,"/videos?api_key=").concat(d.f)},h=function(e){return"".concat(d.b,"/discover/movie?api_key=").concat(d.f).concat(d.e).concat(e)},g=function(e,t,n){return"".concat(e,"-").concat(t,"-").concat(n)},_=function(){function e(){Object(f.a)(this,e)}return Object(v.a)(e,null,[{key:"get",value:function(){var t=Object(s.a)(i.a.mark((function t(n){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.request(n,"GET"));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"getMergeData",value:function(){var t=Object(s.a)(i.a.mark((function t(n){var a;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.map((function(t){var n=t.id;return e.request(E(n),"GET")})),t.next=3,Promise.all(a).then((function(e){e.forEach((function(e,t){var a=e.results;n[t].videos=a}))}));case 3:return t.abrupt("return",n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},{key:"request",value:function(){var t=Object(s.a)(i.a.mark((function t(n,a){var r,c;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.cachableRequest(n,a);case 2:return r=t.sent,t.next=5,r.clone().json();case 5:return c=t.sent,t.abrupt("return",Object(l.a)({headers:r.headers},c));case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}()},{key:"cachableRequest",value:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a,r,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=g(t,n,d.a),r=m.has(a)?m.get(a):fetch(t),m.set(a,r),e.next=5,r;case 5:return c=e.sent,m.drop(a),e.abrupt("return",b(c));case 8:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}]),e}(),O=n(10),j={logout:function(e){e.state.logout=!1},getData:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a,r,c,o,u,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state,e.next=3,_.get(h(n));case 3:return r=e.sent,c=r.results,o=r.total_pages,e.next=8,_.getMergeData(c);case 8:u=e.sent,s=u.map((function(e){return Object(O.i)(e)})),a.totalPages=o,a.data=Object(O.c)(s),a.favorites=Object(O.e)("favorites")||[];case 13:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),setFavorites:function(e,t){var n=e.state;if(!Object(O.b)(n.favorites,"id",t)){var a=Object(O.b)(n.data,"id",t);a.isFavorites=!0,n.favorites=[].concat(Object(o.a)(n.favorites),[a]),Object(O.g)(n.favorites)}},removeFavorites:function(e,t){var n=e.state,a=Object(o.a)(n.favorites),r=Object(O.a)(n.data,"id",t),c=Object(O.a)(n.favorites,"id",t);n.data[r]&&(n.data[r].isFavorites=!1),a.splice(c,1),n.favorites=a,Object(O.g)(n.favorites)},getSearchMovies:function(){var e=Object(s.a)(i.a.mark((function e(t,n){var a,r,c,o,u,s,l,f;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=t.state,r=n.value,c=n.id,e.next=4,_.get((i=r,v=c,"".concat(d.b,"/search/movie?api_key=").concat(d.f,"&query=").concat(i,"&page=").concat(v)));case 4:return o=e.sent,u=o.results,s=o.total_pages,l=u.map((function(e){return Object(O.i)(e)})),e.next=10,_.getMergeData(l);case 10:f=e.sent,a.searchResult=f,a.searchTotalPages=s;case 13:case"end":return e.stop()}var i,v}),e)})));return function(t,n){return e.apply(this,arguments)}}()},y=Object(a.c)({state:c,actions:j}),k=Object(r.b)()},34:function(e,t,n){e.exports=n.p+"static/media/code.192f4687.jpg"},39:function(e,t,n){e.exports=n.p+"static/media/poster.4a2bbc08.jpg"},42:function(e,t,n){e.exports=n(55)},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(38),o=n.n(c),u=n(25),i=n(22),s=n(10),l=Object(s.j)(Object(a.lazy)((function(){return Promise.all([n.e(5),n.e(4)]).then(n.bind(null,68))}))),f=n(19),v=n(35),d=n.n(v),p=function(e){var t=e.to,n=e.label;return r.a.createElement("li",{className:"nav-item"},r.a.createElement(i.b,{to:t,className:"nav-link"},n))},m=n(16),b=n(24);var E=function(){var e=Object(a.useState)(""),t=Object(f.a)(e,2),n=t[0],c=t[1],o=Object(b.b)().actions.getSearchMovies,u=Object(m.g)();return r.a.createElement("form",{onSubmit:function(e){e.preventDefault(),0!==n.trim().length&&(o({value:n,id:1}),c(""),u.push("/search"))},className:"form-inline my-2 my-lg-0"},r.a.createElement("input",{type:"text",value:n,onChange:function(e){var t=e.target.value;return c(t)},placeholder:"Search",className:"form-control mr-sm-2"}),r.a.createElement("button",{type:"submit",className:"btn btn-secondary my-2 my-sm-0"},"Search"))};var h=function(){var e=Object(a.useState)(!1),t=Object(f.a)(e,2),n=t[0],c=t[1];return r.a.createElement("nav",{className:"navbar navbar-expand-lg fixed-top navbar-dark bg-dark"},r.a.createElement("div",{className:"container"},r.a.createElement("span",{className:"navbar-brand"},"Search Movies"),r.a.createElement("button",{className:"navbar-toggler",onClick:function(){return c(!n)}},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:d()("navbar-collapse",{collapse:!n})},r.a.createElement("ul",{className:"navbar-nav mr-auto"},r.a.createElement(p,{to:"/movies",label:"Movies"}),r.a.createElement(p,{to:"/favorites",label:"Favorites"})),r.a.createElement(E,null))))},g=function(){return r.a.createElement("header",null,r.a.createElement(h,null))},_=function(){return r.a.createElement(i.a,null,r.a.createElement(g,null),r.a.createElement(l,null))};var O=function(){return r.a.createElement(u.a,{value:b.a},r.a.createElement(_,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(54);o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(O,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},7:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"b",(function(){return l})),n.d(t,"f",(function(){return f})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return v})),n.d(t,"d",(function(){return p}));var a=Object({NODE_ENV:"production",PUBLIC_URL:"/movie",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,REACT_APP_BASE_URL:"https://api.themoviedb.org/3",REACT_APP_BASE_URL_VIDEO:"https://www.youtube.com/embed/",REACT_APP_BASE_URL_IMG:"https://image.tmdb.org/t/p/w500/",REACT_APP_SEGMENT_KEY:"1891d8c026e987dba9231ee5ca723750",REACT_APP_CERTIFICATE:"&certification_country=US&certification.lte=G&sort_by=popularity.desc&page="}),r=a.REACT_APP_BASE_URL,c=a.REACT_APP_SEGMENT_KEY,o=a.REACT_APP_CERTIFICATE,u=a.REACT_APP_BASE_URL_IMG,i=a.REACT_APP_BASE_URL_VIDEO,s="movies",l=r,f=c,v=o,d=u,p=i}},[[42,1,2]]]);
//# sourceMappingURL=main.3377f178.chunk.js.map